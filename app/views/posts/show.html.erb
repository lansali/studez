<p id="notice"><%= notice %></p>

<h2>
  <%= @post.title %> by <%= @post.author.username %>
</h2>
<br/>

<%= @post.content %>
<br/>

<h3>Post a comment</h3>
<%= render 'comments/form', comment: @comment, post_id: @post.id %>

<h3>Comments</h3>
<% @post.comments.each do |comment| %>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title"><%= comment.user.username %></h5>
      <p class="card-text"><%= comment.comment %></p>
      <p class="card-text"><small class="text-muted"><%= comment.updated_at %></small></p>
      <% if current_user.id == comment.user_id %>
        <%= link_to 'Edit', edit_comment_path(comment), class: "card-link" %>
        <%= link_to 'Destroy', comment, method: :delete, data: { confirm: 'Are you sure you want to delete this comment?' }, class: "card-link" %>
      <% end %>
    </div>
  </div>
  <br/>
<% end %>

<% if logged_in? %>
  <% if current_user.id == @post.author_id %>
    <%= link_to 'Edit', edit_post_path(@post) %> |
  <% end %>
<% end %>
<%= link_to 'Back to all blogs', posts_path %>
